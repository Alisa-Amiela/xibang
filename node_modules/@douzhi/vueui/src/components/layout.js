Vue.component("dz-page", {
  template: `<div class="page"><slot></slot></div>`
});

Vue.component("dz-body", {
  props: ["defaultPage"],
  template: `<div class="dz-body"><router-view></router-view></div>`,
  render(createElement) {
    let componentName = this.$parent.$options.name;
    switch (componentName) {
      case "dz-layout":
        return createElement("div", { class: "dz-body" }, [
          createElement("router-view")
        ]);
        break;
      case "dz-grid-view":
        return createElement("tbody", null, this.$slots.default);
        break;
    }
  },
  mounted() {
    if (this.$props.defaultPage != undefined) {
      let page = this.$props.defaultPage;
      let route = [
        {
          path: page,
          component: function(resolve) {
            axios
              .get(page.substr(1) + ".html?t=" + new Date().getTime())
              .then(function(rps) {
                resolve({
                  template: rps.data
                });
              });
          }
        }
      ];
      this.$router.addRoutes(route);
      this.$router.push(this.$props.defaultPage);
    }
  }
});

Vue.component("dz-menu", {
  props: {
    to: {
      type: String,
      default: ""
    },
    icon: {
      type: String,
      default: "home"
    }
  },
  template: `
<li class="layui-nav-item">
  <router-link :to="to">
    <i :class="'layui-icon layui-icon-'+icon"></i>
    <cite><slot></slot></cite>
  </router-link>
</li>`
});

Vue.component("dz-header", {
  props: ["homePage"],
  template: `
<div class="dz-header">
  <ul class="layui-layout-left">
    <li class="layui-nav-item">
      <a href="javascript:;" @click="toggleSide">
        <i class="layui-icon layui-icon-shrink-right"></i>
      </a>
    </li>
    <li class="layui-nav-item">
      <a :href="homePage" target="_blank">
        <i class="layui-icon layui-icon-website"></i>
      </a>
    </li>
  </ul>
  <ul class="layui-layout-right">
    <li class="layui-nav-item">
      <a href="javascript:;">
        <cite>Admin</cite>
      </a>
    </li>
  </ul>
</div>`,
  render(createElement) {
    let componentName = this.$parent.$options.name;
    switch (componentName) {
      case "dz-layout":
        return createElement("div", { class: "dz-header" }, [
          createElement("ul", { class: "layui-layout-left" }, [
            createElement("li", { class: "layui-nav-item" }, [
              createElement(
                "a",
                {
                  attrs: { href: "javascript:;" },
                  on: {
                    click: this.toggleSide
                  }
                },
                [
                  createElement("i", {
                    class: "layui-icon layui-icon-shrink-right"
                  })
                ]
              )
            ]),
            createElement("li", { class: "layui-nav-item" }, [
              createElement(
                "a",
                {
                  attrs: { target: "_blank", href: this.$props.homePage }
                },
                [createElement("i", { class: "layui-icon layui-icon-website" })]
              )
            ])
          ]),
          createElement("ul", { class: "layui-layout-right" }, [
            createElement("li", { class: "layui-nav-item" }, [
              createElement("a", { attrs: { href: "javascript:;" } }, [])
            ])
          ])
        ]);
        break;
      case "dz-grid-view":
        return createElement("thead", null, this.$slots.default);
        break;
    }
  },
  methods: {
    toggleSide() {
      this.$root.isHideSide = !this.$root.isHideSide;
    }
  }
});

Vue.component("dz-layout", {
  template: `<div :class="{'dz-layout':true, 'dz-side-shrink':this.$root.isHideSide}"  ref="abc"><slot></slot></div>`
});

Vue.component("dz-side", {
  props: {
    title: {
      type: String,
      default: "DzAdmin"
    },
    link: {
      type: String,
      default: "index.html"
    }
  },
  template: `
<div class="layui-side dz-side-menu">
  <div class="dz-logo">
    <a :href="link">{{ title }}</a>
  </div>
  <ul class="layui-nav layui-nav-tree dz-nav">
    <slot></slot>
  </ul>
</div>`
});
